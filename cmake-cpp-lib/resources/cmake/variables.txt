# PLACEHOLDER-BEGIN #

SET (PROVIDER "setmy.info")

IF(CMAKE_SYSTEM_NAME STREQUAL "Linux")
    SET (CMAKE_INSTALL_PREFIX  "/opt/${PROVIDER}")
ENDIF()
IF(CMAKE_SYSTEM_NAME STREQUAL "FreeBSD")
    SET (CMAKE_INSTALL_PREFIX  "/usr/local")
    SET(CPACK_ENABLE_FREEBSD_PKG ON CACHE BOOL "Enable pkg(8) generator in CPack")
ENDIF()

IF (${CMAKE_SYSTEM_PROCESSOR} MATCHES i386|i586|i686)
        SET ( ARCH "32")
ELSE ()
        SET ( ARCH "64")
ENDIF ()

IF(EXISTS "/etc/debian_version")
    SET ( DISTRIBUTION "Debian")
ENDIF()
IF(EXISTS "/etc/redhat-release")
   SET ( DISTRIBUTION "RedHat")
ENDIF()
IF(EXISTS "/bin/freebsd-version")
   SET ( DISTRIBUTION "FreeBSD")
ENDIF()

message("-- CMAKE_SYSTEM_INFO_FILE: ${CMAKE_SYSTEM_INFO_FILE}")
message("-- CMAKE_SYSTEM_NAME:      ${CMAKE_SYSTEM_NAME}")
message("-- CMAKE_SYSTEM_PROCESSOR: ${CMAKE_SYSTEM_PROCESSOR}")
message("-- CMAKE_SYSTEM:           ${CMAKE_SYSTEM}")
message("-- CMAKE_HOST_UNIX:        ${CMAKE_HOST_UNIX}")
message("-- CMAKE_SYSTEM_VERSION:   ${CMAKE_SYSTEM_VERSION}")
message("-- DISTRIBUTION:           ${DISTRIBUTION}")

SET (PROJECT_VERSION                ${PROJECT_VERSION_MAJOR}.${PROJECT_VERSION_MINOR}.${PROJECT_VERSION_PATCH})
# BINARY_OUTPUT_PATH is current folder
SET (PROJECT_PATH                   ${PROJECT_BINARY_DIR})
SET (TARGET_DIR_NAME                build)
SET (BUILD_PATH                     ${PROJECT_PATH}/${TARGET_DIR_NAME})
SET (RESOURCES_PATH                 ${PROJECT_PATH}/resources)
SET (SOURCES_PATH                   ${PROJECT_PATH}/src)
SET (INSTALL_SCRIPTS_PATH           ${RESOURCES_PATH}/install)
SET (BINARY_OUTPUT_PATH             ${BUILD_PATH}/bin)
SET (LIBRARY_OUTPUT_PATH            ${BUILD_PATH}/lib)
SET (MAN_OUTPUT_PATH                ${BUILD_PATH}/man)
SET (DOC_OUTPUT_PATH                ${BUILD_PATH}/doc)
SET (ETC_OUTPUT_PATH                ${BUILD_PATH}/etc)
SET (INFO_OUTPUT_PATH               ${BUILD_PATH}/info)
SET (INCLUDE_OUTPUT_PATH            ${BUILD_PATH}/include)
SET (DEFAULT_PACKAGES               "TGZ;STGZ;7Z;TBZ2;TXZ;TZ;ZIP")

SET (EXECUTABLE_OUTPUT_PATH ${BINARY_OUTPUT_PATH})
SET (INCLUDE_OUTPUT_PATH    ${PROJECT_BINARY_DIR}/main/cpp/include)
SET (PROJECT_MODULE_LIBRARY_SOURCES src/main/cpp/Application.cpp src/main/cpp/Example.cpp)
SET (PROJECT_MODULE_TEST_SOURCES src/test/cpp/CppUnitRunner.cpp src/test/cpp/CppUnitTest.cpp)

SET (CMAKE_CONFIGURATION_TYPES "Release;RelWithDebInfo;Debug" CACHE STRING "Configurations" FORCE)

SET(CMAKE_ALLOW_LOOSE_LOOP_CONSTRUCTS true)

IF(CMAKE_SYSTEM_NAME STREQUAL "FreeBSD")
    IF(CMAKE_BUILD_TYPE STREQUAL "Debug")
        SET (CMAKE_CXX_FLAGS_DEBUG "${CMAKE_CXX_FLAGS_DEBUG} -g")
    ENDIF()
    INCLUDE_DIRECTORIES("/usr/local/include")
    INCLUDE_DIRECTORIES("/opt/jdk/include")
    INCLUDE_DIRECTORIES("/opt/jdk/include/freebsd")
    INCLUDE_DIRECTORIES("${PROJECT_BINARY_DIR}/src/main/cpp/include")
    INCLUDE_DIRECTORIES("${PROJECT_BINARY_DIR}/src/test/cpp/include")
    SET (EXAMPLE_LINKING      "-lexampleshared -pthread")
    SET (EXAMPLE_TEST_LINKING "-lexampleshared -pthread")
    LINK_DIRECTORIES(${JDK_LIB_DIR})
    LINK_DIRECTORIES("${BUILD_PATH}/lib")
ENDIF()

IF(CMAKE_SYSTEM_NAME STREQUAL "Linux" )
    IF(CMAKE_BUILD_TYPE STREQUAL "Debug")
        #SET (CMAKE_CXX_FLAGS "-s")
        SET (CMAKE_BUILD_TYPE debug)
        SET (CMAKE_CXX_FLAGS_DEBUG "-g")
    ENDIF()
    INCLUDE_DIRECTORIES("/usr/local/include")
    INCLUDE_DIRECTORIES("/opt/jdk/include")
    INCLUDE_DIRECTORIES("/opt/jdk/include/linux")
    SET (EXAMPLE_LINKING      "-lexampleshared -pthread -ldl")
    SET (EXAMPLE_TEST_LINKING "-lexampleshared -pthread -ldl")
    SET (JDK_LIB_DIR "/opt/jdk/lib")
    SET (JDK_INCLUDE_DIR          "/opt/jdk/include")
    SET (JDK_INCLUDE_OS_DIR       "/opt/jdk/include/linux")
    SET (JDK_LIB_DIR              "/opt/jdk/lib")
    INCLUDE_DIRECTORIES("${PROJECT_BINARY_DIR}/src/main/cpp/include")
    INCLUDE_DIRECTORIES("${PROJECT_BINARY_DIR}/src/test/cpp/include")
    INCLUDE_DIRECTORIES(${JDK_INCLUDE_DIR})
    INCLUDE_DIRECTORIES(${JDK_INCLUDE_OS_DIR})
    LINK_DIRECTORIES(${JDK_LIB_DIR})
    LINK_DIRECTORIES("${BUILD_PATH}/lib")
ENDIF()

IF(CMAKE_CONFIGURATION_TYPES)
   SET(CMAKE_CONFIGURATION_TYPES Debug Release)
   SET(CMAKE_CONFIGURATION_TYPES "${CMAKE_CONFIGURATION_TYPES}" CACHE STRING "Reset the configurations" FORCE)
ENDIF()

# PLACEHOLDER-END #
